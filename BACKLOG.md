# BACKLOG ‚Äî pymol-rs

## üêõ Bugs

_–ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –±–∞–≥–æ–≤_

---

## ‚ö° Performance

### GRO: –º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö —Å–∏—Å—Ç–µ–º
**–§–∞–π–ª:** `_tests/gro/md_membrane.gro` (38 MB, 577 341 –∞—Ç–æ–º) –≥—Ä—É–∑–∏—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.

**–ü—Ä–∏—á–∏–Ω–∞:** `generate_bonds_for_state` ‚Äî O(n¬≤) –±—Ä—É—Ç—Ñ–æ—Ä—Å –ø–æ –≤—Å–µ–º –ø–∞—Ä–∞–º –∞—Ç–æ–º–æ–≤.
–î–ª—è 577–ö –∞—Ç–æ–º–æ–≤ —ç—Ç–æ ~1.66√ó10¬π¬π —Å—Ä–∞–≤–Ω–µ–Ω–∏–π.

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**
- –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–µ—Ç–∫–∞ (cell-list / uniform grid) ‚Äî O(n), —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è MD-—Ç—É–ª–æ–≤
- –î–ª—è –∫—Ä—É–ø–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (>~50K –∞—Ç–æ–º–æ–≤) bond generation —á–∞—Å—Ç–æ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–∞: –º–æ–ª–µ–∫—É–ª—ã –∏–∑–≤–µ—Å—Ç–Ω—ã –∏–∑ —Ç–æ–ø–æ–ª–æ–≥–∏–∏, –∞ –≤–æ–¥—É/–∏–æ–Ω—ã —Å–≤—è–∑—ã–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ. –ú–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ threshold –∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–≤—è–∑–µ–π –¥–ª—è —Ç–∞–∫–∏—Ö —Å–∏—Å—Ç–µ–º.
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: residue-template bond inference (PDB-—Å—Ç–∏–ª—å) –≤–º–µ—Å—Ç–æ distance-based –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –æ—Å—Ç–∞—Ç–∫–æ–≤

---

## ‚ú® Features

### GRO: —Ä–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —Ü–µ–ø–∏ (ChimeraX-style)
ChimeraX —É–º–µ–µ—Ç –¥–µ–ª–∏—Ç—å –±–æ–ª—å—à–∏–µ GRO-—Å–∏—Å—Ç–µ–º—ã –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ü–µ–ø–∏. –°–µ–π—á–∞—Å —É –Ω–∞—Å –≤—Å—ë ‚Äî –æ–¥–Ω–∞ –º–æ–ª–µ–∫—É–ª–∞.

**–ü–æ–¥—Ö–æ–¥:**
- –î–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑—Ä—ã–≤ —Ü–µ–ø–∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é `resnum` (GROMACS wraps at 99999 ‚Üí –Ω–æ–≤–∞—è –º–æ–ª–µ–∫—É–ª–∞)
- –°–ª–æ–≤–∞—Ä—å –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–∞—Å—Ç–≤–æ—Ä–∏—Ç–µ–ª–µ–π (`SOL`, `WAT`, `HOH`, `TIP3`, `TIP4P`, ...) ‚Üí –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é solvent-—Ü–µ–ø—å
- –°–ª–æ–≤–∞—Ä—å –∏–æ–Ω–æ–≤ (`NA`, `CL`, `MG`, `CA`, `K`, ...) ‚Üí –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ü–µ–ø—å
- –°–ª–æ–≤–∞—Ä—å –ª–∏–ø–∏–¥–æ–≤ (`POPC`, `POPE`, `DPPC`, `CHOLESTEROL`, ...) ‚Üí membrane-—Ü–µ–ø—å
- –û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –±–µ–ª–æ–∫/–Ω—É–∫–ª–µ–∏–Ω–æ–≤—ã–µ –∫–∏—Å–ª–æ—Ç—ã, –¥–µ–ª—è—Ç—Å—è –ø–æ backbone connectivity gaps

---

### MMTF Format Support (Read + Write)
–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MMTF (Macromolecular Transmission Format) –≤ `pymol-io`.
–ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä.

---

### Mouse / Touchpad UX
–ü—Ä–∏–≤–µ—Å—Ç–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º—ã—à–∏ –∫ PyMOL-—Å—Ç–∞–Ω–¥–∞—Ä—Ç—É:
- **Scroll + Drag** ‚Üí Zoom (Z-—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –∫–∞–º–µ—Ä—ã)
- **Scroll only (–∫–æ–ª—ë—Å–∏–∫–æ / —Ç–∞—á–ø–∞–¥)** ‚Üí Slab/Clipping planes (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∏ –∑–∞–¥–Ω–µ–≥–æ –∫–ª–∏–ø–ø–∏–Ω–≥–∞)

---

### Selection UX Logic
–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–¥–µ–ª–µ–Ω–∏—è, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ Sequence Viewer.
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –∫–ª–∏–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –≤—ã–¥–µ–ª–µ–Ω–∏—é (Ctrl/Cmd-click –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **PyMOL-—Å—Ç–∞–Ω–¥–∞—Ä—Ç**: –∫–ª–∏–∫ = –∑–∞–º–µ–Ω–∞, Shift+click = –¥–∏–∞–ø–∞–∑–æ–Ω, Ctrl+click = –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
- **–†–µ—à–∏—Ç—å**: –≥–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `mouse_selection_mode` –∏–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è Sequence Viewer?

---

### Interactive 3D Picking
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –º—ã—à–∏–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å 3D-–æ–±—ä–µ–∫—Ç–∞–º–∏:
- **Picking modes**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `picking_mode` (atom, CA, residue, chain, molecule, object)
- **Hover highlight**: –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å—É—â–Ω–æ—Å—Ç–∏ –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º –¥–æ –∫–ª–∏–∫–∞
- **Click behavior**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Ç–µ–∫—É—â–∏–π `sele` (—Å —É—á—ë—Ç–æ–º `mouse_selection_mode`)

---

## üîß –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ `SessionAdapter` / `ViewerAdapter`
–ü–æ—Å–ª–µ PSE-—Ä–∞–±–æ—Ç—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ –¥–≤–∞ –ø–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö –∞–¥–∞–ø—Ç–µ—Ä–∞ `ViewerLike`:
- `pymol-scene/src/session_adapter.rs` ‚Äî `SessionAdapter`
- `pymol-gui/src/viewer_adapter.rs` ‚Äî `ViewerAdapter`

~80% —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `ViewerLike` –æ–¥–∏–Ω–∞–∫–æ–≤—ã. –†–∞–∑–Ω–∏—Ü–∞: `ViewerAdapter` –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–µ—Ä–∂–∏—Ç `TaskRunner` –∏ —É–º–µ–µ—Ç –¥–µ–ª–∞—Ç—å async fetch.

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
- –í—ã–Ω–µ—Å—Ç–∏ –±–∞–∑–æ–≤—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ `SessionAdapter` (pymol-scene), `ViewerAdapter` –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∫ –Ω–µ–º—É
- –ú–∞–∫—Ä–æ—Å `impl_viewer_like_base!(self.state)` –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- –¢—Ä–µ–π—Ç-extension –∏–ª–∏ blanket impl –¥–ª—è `&mut Session`

---

## üìù –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è / –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ

- –ë–æ–ª—å—à–∏–µ PSE —Ñ–∞–π–ª—ã (`epitopes.pse` ‚Äî 41 –æ–±—ä–µ–∫—Ç, 14.5 MB)
- Camera restoration / –∫–∞—á–µ—Å—Ç–≤–æ auto-centering
- Per-representation colors (cartoon vs stick colors –æ—Ç–¥–µ–ª—å–Ω–æ)
- Custom colors –∏–∑ PSE session (–ø–æ–ª–µ `colors list`)
- Object-level color (header[3] = 2060287 –¥–ª—è 1fsd ‚Äî –Ω–µ –º–∞–ø–ø–∏—Ç—Å—è)
